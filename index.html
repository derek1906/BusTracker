<!DOCTYPE HTML>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <link type="text/css" rel="stylesheet" href="jquery-theme-green.min.css">
        <link type="text/css" rel="stylesheet" href="jquery.mobile-1.3.2.min.css">
        <link type="text/css" rel="stylesheet" href="css.css">
        <script src="jquery.js"></script>
        <script>
        	$(document).bind("mobileinit", function(){
				$.mobile.defaultPageTransition = "pop";
                // $.mobile.page.prototype.options.headerTheme = "e";
                // $.mobile.page.prototype.options.footerTheme = "d";
			});
        </script>
        <script src="jquery.mobile-1.3.2.min.js"></script>
        <script src="js.js"></script>
    </head>
    <body>
        <!-- Templates -->
        <div data-role="header" data-id="default" data-position="fixed" id="templateHeader" data-tap-toggle="false">
             <h1>MTD Bus Tracker</h1>
        </div>
        <div data-role="footer" data-id="default" data-position="fixed" id="templateFooter" data-tap-toggle="false">
            <div data-role="navbar">
                <ul>
                    <li><a href="#busArrival" data-icon="star">Bus Arrivals</a></li>
                    <li><a href="#routesData" data-icon="search">Route Data</a></li>
                    <li><a href="#busSpyer" data-icon="info">Bus Spyer</a></li>
                    <li><a href="#reroutes" data-icon="alert">Reroutes</a></li>
                </ul>
            </div>
        </div>
        <!------------>

        <div data-role="page" id="busArrival" data-linkName="busArrival" class="customHeader">
            <div data-role="header" data-position="fixed" data-tap-toggle="false">
                <h1>MTD Bus Tracker</h1>
                <a data-icon="info" href="#about" class="ui-btn-right">About</a>
            </div>
            <div id="temperature" class="ui-bar ui-bar-b">
                <div><h3>Loading...</h3></div>
                <div style="height: 0; opacity: 0;">
                    <h3>
                        <span>Current Weather:</span>
                        <img id="tempIcon" src="http://l.yimg.com/a/i/us/we/52/33.gif" width="22"/>
                        <span>
                            <span id="tempF">75</span><sup>o</sup>F | <span id="tempC"></span><sup>o</sup>C - <span id="tempText"></span>
                        </span>
                    </h3>
                </div>
            </div>
            <div data-role="content">
                <!-- Press <b>GPS</b> to get closest stop or
                <hr/>
                -->
                Welcome:
                <div class="ui-grid-a">
                    <div class="ui-block-a">
                        <button data-icon="home" data-mini="true" id="gps">Select closest stop</button>
                    </div>
                    <div class="ui-block-b">
                        <button data-mini="true" id="selectFromMap">Select stop from map</button>
                    </div>
                </div>
                <hr/>
                or, search by stop name: <img src="loading.gif" class="loadingImg"/>
                <br />
                <input id="stopSearchInput" type="search" placeholder="Enter a stop name..."/>
                <br />
                <ul data-role="listview" id="stopSearchResults" data-autodividers="true"></ul>
                <ul data-role="listview" id="favoriteStops">
                    <li data-role="list-divider" data-theme="e">Favorites</li>
                </ul>
            </div>
        </div>

        <div data-role="page" id="busArrivalShow" data-linkName="busArrival" class="customHeader">
            <div data-role="header" data-position="fixed" data-tap-toggle="false">
                <a href="#busArrival" data-icon="arrow-l">Back</a>
                <h1>MTD Bus Tracker</h1>
                <span id="addToFavoriteBtn" class="ui-btn-right">
                    <button id="addToFavorite" data-icon="star" data-theme="a">Add to â˜…</button>
                </span>
                <span id="removeFavoriteBtn" class="ui-btn-right">
                    <button id="removeFavorite" data-icon="star" data-theme="e">Remove</button>
                </span>
            </div>
            <div data-role="content">
                <div id="busArrivalDesc"></div>
                <div id="lastUpdated"></div><br/>
                <ul data-role="listview" id="busArrialResults"></ul>
            </div>
        </div>

        <div data-role="page" id="vehicleDetailShow" data-linkName="busArrival" class="customHeader">
            <div data-role="header" data-position="fixed" data-tap-toggle="false">
                <a href="#busArrivalShow" data-icon="arrow-l">Back</a>
                <h1>MTD Bus Tracker</h1>
            </div>
            <div data-role="content">
                <div id="vehicleDetailDesc">
                    <h3><span id="vehicleName"></span> (ID: <span id="vehicleId"></span>)</h3>
                    <br/>
                    <ul data-role="listview">
                        <li data-role="list-divider">Current Next Stop</li>
                        <li><a id="vehicleNextStop"></a></li>            
                        <li data-role="list-divider">Current Previous Stop</li>
                        <li><a id="vehiclePrevStop"></a></li>
                        <li data-role="list-divider">Depart from</li>
                        <li><a id="vehicleDeparture"></a></li>
                        <li data-role="list-divider">Destination</li>
                        <li><a id="vehicleDestination"></a></li>
                        <li data-role="list-divider">Current Location</li>
                        <li><a id="vehicleLanLon"></a></li>
                    </ul>
                </div>
            </div>
        </div>


        <div data-role="page" id="routesData" data-linkName="routesData">
            <div data-role="content">
                <ul data-role="listview" data-filter="true" id="busRoutes"></ul>
            </div>
        </div>

        <div data-role="page" id="busRouteMap" data-linkName="routesData" class="customHeader customFooter">
           <div data-role="header" data-tap-toggle="false" class="ui-bar-b">
            	<a href="#" onclick="history.back();" data-icon="arrow-l" data-mini="true">Back</a><h1>Map View</h1>
            </div>
            <div data-role="content">
            	<div id="busRouteMapView"></div>
            </div>
        </div>

        <div data-role="page" id="busSpyer" data-linkName="busSpyer">
            <div data-role="content">
                <p>Bus Spyer lets you track the location of every vehicle running at this moment. Choose a vehicle below to begin.</p>
                <p id="busSpyerInfo"></p>
                <div data-role="collapsible-set" data-inset="false" id="busSpyerList"></div>
            </div>
        </div>

        <div data-role="page" id="busSpyerMap" data-linkName="busSpyer" class="customHeader">
            <div data-role="header" data-position="fixed" data-tap-toggle="false">
                <a href="#busArrivalShow" data-icon="arrow-l">Back</a>
                <h1>Bus Spyer</h1>
            </div>
            <div data-role="content">
                <div id="busSpyerMapView"></div>
            </div>
        </div>

        <div data-role="page" id="reroutes" data-linkName="reroutes">
            <div data-role="content">
                <ul data-role="listview" id="rerouteList"></ul>
            </div>
        </div>


        <div data-role="page" id="about" data-linkName="about">
            <div data-role="content">
                Copyright 2013 Derek Leung.<br/>
                All bus data are provided and owned by <a href="http://www.cumtd.com" target="_blank">CUMTD</a>.<br/>
                Weather data are provided by Yahoo! Weather.<br/>
                <br/>
                Bus stop data are cached to reduce data transmission, updated per 5 days.
                <button id="customRequest" data-inline="true" data-mini="true">Debug</button>
                <hr/>
                <div class="ui-grid-b">
                    <div class="ui-block-a">
                        <button id="getAPIUsage" data-mini="true">View<br>API Usage</button>
                    </div>
                    <div class="ui-block-b">
                        <button id="getSettings" data-mini="true">View<br>Settings</button>
                    </div>
                    <div class="ui-block-c">
                        <button id="getCache" data-mini="true">View<br>Cache</button>
                    </div>
                </div>
                <div id="appOutput"></div>
            </div>
        </div>

    </body>
</html>